<p-dialog header="Resposta Parcial"
  position="top" [(visible)]="displayModal"
  [style]="{width: '50vw'}">

  <form #myForm="ngForm" autocomplete="off" (ngSubmit)="salvar()">
    <div class="p-field p-col-12">
      <label><b>Forma de Resposta *</b></label>
      <p-dropdown inputId="formaEnvio" [disabled]="tipoUsuario==true"
        [options]="formasResposta"
        name="formaEnvio"
        required
        (onChange)="habilitaCampoEmail(respostaParcial.formaEnvio)"
        [(ngModel)]="respostaParcial.formaEnvio"
        placeholder="Selecione a opção"
        #formaEnvio="ngModel">
      </p-dropdown>
    </div>
    <div class="p-col-12 p-fluid"
    [hidden]="habilitaEmail">
      <label>Email</label>
      <input type="text"
      name="email"
      [(ngModel)]="respostaParcial.emailEnviado"
      #email="ngModel"
      pInputText>
    </div>
    <div class="p-col-9 p-md-9 p-fluid">
      <label>
        <b>Modelo de Documento</b>
      </label>
      <p-dropdown inputId="modeloDocumento" [options]="modeloDocumentos" name="modeloDocumento"
        [(ngModel)]="respostaParcial.modeloDocumento" (onChange)="consultaModelo(respostaParcial.modeloDocumento)"
        placeholder="Selecione a opção">
      </p-dropdown>
    </div>
    <div class="p-col-12 p-md-12 p-fluid">
      <label><b>Descrição da Resposta Parcial *</b></label>
      <p-editor [(ngModel)]="respostaParcial.descricao"
       name="modelo"
       required
       [style]="{'height':'130px'}"></p-editor>
    </div>
    <div class="p-field p-col-12">
      Abaixo estão os arquivos anexos ao seu Atendimento. Caso queira enviar algum destes junto com o e-mail de encaminhamento, basta selecioná-lo abaixo:
      <p-table [value]="anexos" [responsive]="true">
        <ng-template pTemplate="header">
          <tr>
            <th style="width:5%;"></th>
            <th style="width:95%;">Arquivo anexo</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-anexo>
          <tr>
            <td>
              <p-checkbox name="anexo" [(value)]="anexo.id" [(ngModel)]="respostaParcial.selectedAnexos" [(inputId)]="anexo.id"></p-checkbox>
            </td>
            <td>
              {{anexo.nomeArquivo}}
            </td>
          </tr>
        </ng-template>
      </p-table>
      </div>

    <button pButton type="submit" label="Salvar" class="ui-button prime-button" [disabled]="myForm.invalid"></button>&nbsp;
    <button pButton type="button" label="Fechar" class="ui-button-secondary prime-button" (click)="onClose()"></button>
    &nbsp;&nbsp;&nbsp; * Campos obrigatórios
  </form>
</p-dialog>


<p-dialog header="Visualiza Resposta Parcial" position="top" [(visible)]="displayModalVisualizaResposta" [style]="{width: '70vw'}" id="dialog2">

  <p-card  styleClass="ui-card-shadow">
    <div id="print-section2">
    <p-header>
      <p-card header="Dados da Resposta">
      <div class="p-fluid p-formgrid p-grid">
        <div class="p-field p-col-2">
          <label>Forma de Envio</label>
          <div>
            <label>{{respostaParcial.descricaoFormaEnvio}}</label>
          </div>
        </div>
        <div class="p-field p-col-5">
          <label>Email</label>
          <div>
            <label>{{respostaParcial.emailEnviado}}</label>
          </div>
        </div>
      </div>
    </p-card>
    </p-header>
    <p-card header="Descrição da Resposta">
    <div class="p-field p-col-12">
      <div>
        <div [innerHTML]="respostaParcial.descricao"></div>
      </div>
    </div>
    </p-card>
   </div>
    <p-footer>
      <button pButton type="button" label="Fechar" class="ui-button prime-button"
      (click)="onCloseVisualiza()"></button>&nbsp;
      <button pButton type="button" printTitle = "Impressão"
      label="Imprimir" class="ui-button prime-button"
      printSectionId="print-section2" ngxPrint></button>
    </p-footer>
  </p-card>
</p-dialog>

